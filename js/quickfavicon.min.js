function quickfavicon_generate_canvases(i,e,o,n){var a=document.getElementById("quickfavicon_white_mask_source"),i=document.getElementById(i),t=i.getContext("2d"),c=document.getElementById("hidden_canvas_1"),r=c.getContext("2d");c.width=a.width,c.height=a.height,r.drawImage(a,0,0,c.width,c.height);var d=document.getElementById("hidden_canvas_2"),s=d.getContext("2d");d.width=.5*c.width,d.height=.5*c.height,s.drawImage(c,0,0,d.width,d.height);var _=document.getElementById("hidden_canvas_3"),l=_.getContext("2d");_.width=.5*d.width,_.height=.5*d.height,l.drawImage(d,0,0,_.width,_.height);var u=document.getElementById("hidden_canvas_4"),f=u.getContext("2d");u.width=.5*_.width,u.height=.5*_.height,f.drawImage(_,0,0,u.width,u.height);var h=document.getElementById("hidden_canvas_5"),g=h.getContext("2d");if(h.width=.5*u.width,h.height=.5*u.height,g.drawImage(u,0,0,h.width,h.height),i.width=e,i.height=o,e<h.width){if(t.drawImage(h,0,0,e,o),"white"==n){for(var w=t.getImageData(0,0,e,o),v=w.data,y=255,p=0,m=v.length;m>p;p+=4)p>3?(v[p]=y,v[p+1]=y,v[p+2]=y):v[p]<250&&v[p+1]<250&&v[p+2]<250&&(v[p]=y,v[p+1]=y,v[p+2]=y);t.putImageData(w,0,0)}}else if(e<u.width){if(t.drawImage(u,0,0,e,o),"white"==n){for(var j=t.getImageData(0,0,e,o),Q=j.data,y=255,p=0,m=Q.length;m>p;p+=4)p>3?(Q[p]=y,Q[p+1]=y,Q[p+2]=y):Q[p]<250&&Q[p+1]<250&&Q[p+2]<250&&(Q[p]=y,Q[p+1]=y,Q[p+2]=y);t.putImageData(j,0,0)}}else if(e<_.width){if(t.drawImage(_,0,0,e,o),"white"==n){for(var k=t.getImageData(0,0,e,o),b=k.data,y=255,p=0,m=b.length;m>p;p+=4)p>3?(b[p]=y,b[p+1]=y,b[p+2]=y):b[p]<250&&b[p+1]<250&&b[p+2]<250&&(b[p]=y,b[p+1]=y,b[p+2]=y);t.putImageData(k,0,0)}}else if(e<d.width){if(t.drawImage(d,0,0,e,o),"white"==n){for(var q=t.getImageData(0,0,e,o),I=q.data,y=255,p=0,m=I.length;m>p;p+=4)p>3?(I[p]=y,I[p+1]=y,I[p+2]=y):I[p]<250&&I[p+1]<250&&I[p+2]<250&&(I[p]=y,I[p+1]=y,I[p+2]=y);t.putImageData(q,0,0)}}else if(t.drawImage(c,0,0,e,o),"white"==n){for(var C=t.getImageData(0,0,e,o),x=C.data,y=255,p=0,m=x.length;m>p;p+=4)p>3?(x[p]=y,x[p+1]=y,x[p+2]=y):x[p]<250&&x[p+1]<250&&x[p+2]<250&&(x[p]=y,x[p+1]=y,x[p+2]=y);t.putImageData(C,0,0)}}function quickfavicon_identify_canvases(i){var e=[];jQuery(".win-canvas").each(function(){e.push(this);for(var o=0,n=e.length;n>o;o++){console.log(jQuery(this).attr("id"));var a=jQuery(e[o]).attr("id"),t=jQuery(e[o]).attr("width"),c=jQuery(e[o]).attr("height");quickfavicon_generate_canvases(a,t,c,i)}})}function change_ios_sizes_bg(i){jQuery(".ios_icon_image_preview").each(function(){jQuery(this).css("background",i)})}function change_android_sizes_bg(i){jQuery(".android_icon_image_preview").each(function(){jQuery(this).css("background",i)})}var file_frame,wp_media_post_id=wp.media.model.settings.post.id,set_to_post_id=222222222;jQuery(".icon-upload").live("click",function(i){return element=jQuery(this),i.preventDefault(),file_frame?(file_frame.uploader.uploader.param("post_id",set_to_post_id),void file_frame.open()):(wp.media.model.settings.post.id=set_to_post_id,file_frame=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!1}),file_frame.on("select",function(){attachment=file_frame.state().get("selection").first().toJSON(),jQuery(element).closest(".options-section").find(".icon-image").children(".icon-image-inner").children("img").attr("src",attachment.url),jQuery(element).closest(".options-section").hasClass("windows-panel")&&quickfavicon_identify_canvases("white"),jQuery(element).closest(".options-section").find(".hidden-id-field").val(attachment.id),jQuery(element).closest(".options-section").find(".icon-upload").addClass("hidden"),jQuery(element).closest(".options-section").find(".icon-image").removeClass("hidden"),jQuery(element).closest(".options-section").find(".icon-remove").removeClass("hidden"),wp.media.model.settings.post.id=wp_media_post_id}),void file_frame.open())}),jQuery("a.add_media").on("click",function(){wp.media.model.settings.post.id=wp_media_post_id}),jQuery(".icon-remove").on("click",function(){confirm("Are you sure?")&&(jQuery(this).closest(".options-section").find(".icon-image").addClass("hidden"),jQuery(this).closest(".options-section").find(".icon-remove").addClass("hidden"),jQuery(this).closest(".options-section").find(".icon-upload").removeClass("hidden"),jQuery(this).closest(".tab-content").find("h2").children("span").addClass("hidden"),jQuery(this).closest(".options-section").find("h3").children("span").addClass("hidden"),jQuery(this).closest(".options-section").find(".hidden-id-field").val(""),form=jQuery("#quickfavicon_settings_form"),form.submit())}),jQuery(".setting-tab-pane").on("click",function(){jQuery("#quickfavicon_last_tab_used").val(jQuery(this).attr("data-tab-id"))}),jQuery(".ios_bg_colorpicker").colorpicker().on("changeColor.colorpicker",function(i){jQuery("#quickfavicon_ios_icon_bg").val(i.color.toHex()),change_ios_sizes_bg(i.color.toHex())}),jQuery("input[type=radio][name=quickfavicon_ios_icon_bg_radio]").change(function(){if("white"==this.value)jQuery("#quickfavicon_ios_icon_bg").val("#ffffff"),jQuery("#ios_bg_color").prop("disabled",!0),change_ios_sizes_bg("#ffffff");else if("black"==this.value)jQuery("#quickfavicon_ios_icon_bg").val("#000000"),jQuery("#ios_bg_color").prop("disabled",!0),change_ios_sizes_bg("#000000");else if("custom"==this.value){jQuery("#quickfavicon_ios_icon_bg").val(jQuery(".ios_bg_colorpicker").data("colorpicker").color.toHex()),jQuery("#ios_bg_color").prop("disabled",!1);var i=jQuery(".ios_bg_colorpicker").data("colorpicker").color.toHex();change_ios_sizes_bg(i)}}),jQuery(document).ready(function(){""!=quick_favicon.quickfavicon_ios_icon_bg&&change_ios_sizes_bg(quick_favicon.quickfavicon_ios_icon_bg)}),jQuery("#android_app_name").on("change",function(){jQuery("#quickfavicon_android_icon_app_name").val(jQuery(this).val())}),jQuery(".android_bg_colorpicker").colorpicker().on("changeColor.colorpicker",function(i){jQuery("#quickfavicon_android_icon_bg").val(i.color.toHex()),change_android_sizes_bg(i.color.toHex())}),jQuery("input[type=radio][name=quickfavicon_android_icon_bg_radio]").change(function(){if("white"==this.value)jQuery("#quickfavicon_android_icon_bg").val("#ffffff"),jQuery("#android_bg_color").prop("disabled",!0),change_android_sizes_bg("#ffffff");else if("black"==this.value)jQuery("#quickfavicon_android_icon_bg").val("#000000"),jQuery("#android_bg_color").prop("disabled",!0),change_android_sizes_bg("#000000");else if("transparent"==this.value)jQuery("#quickfavicon_android_icon_bg").val(""),jQuery("#android_bg_color").prop("disabled",!0),change_android_sizes_bg("");else if("custom"==this.value){jQuery("#quickfavicon_android_icon_bg").val(jQuery(".android_bg_colorpicker").data("colorpicker").color.toHex()),jQuery("#android_bg_color").prop("disabled",!1);var i=jQuery(".android_bg_colorpicker").data("colorpicker").color.toHex();change_android_sizes_bg(i)}}),jQuery(document).ready(function(){""!=quick_favicon.quickfavicon_android_icon_bg&&change_android_sizes_bg(quick_favicon.quickfavicon_android_icon_bg)}),jQuery(".android_theme_colorpicker").colorpicker().on("changeColor.colorpicker",function(i){jQuery("#quickfavicon_android_icon_theme_color").val(i.color.toHex())}),jQuery(".windows_tile_colorpicker").colorpicker().on("changeColor.colorpicker",function(i){jQuery("#quickfavicon_windows_tile_color").val(i.color.toHex()),jQuery(".windows_icon_cell").css("background",i.color.toHex())}),jQuery("input[type=radio][name=quickfavicon_windows_tile_color_radio]").change(function(){"standard"==this.value?(jQuery("#windows_tile_color").prop("disabled",!0),jQuery("#quickfavicon_windows_tile_color").val("#da532c"),jQuery(".windows_icon_cell").css("background","#da532c")):"custom"==this.value&&(jQuery("#windows_tile_color").prop("disabled",!1),jQuery("#quickfavicon_windows_tile_color").val(jQuery("#windows_tile_color").val()),jQuery(".windows_icon_cell").css("background",jQuery("#windows_tile_color").val()))}),jQuery("input[type=radio][name=quickfavicon_windows_icon_style_radio]").change(function(){"white"==this.value?(jQuery("#quickfavicon_windows_icon_style").val("white"),jQuery(".windows_sizes").find(".windows_icon_image_preview").addClass("windows_icon_image_preview_dark"),quickfavicon_identify_canvases("white")):"asis"==this.value&&(jQuery("#quickfavicon_windows_icon_style").val("asis"),jQuery(".windows_sizes").find(".windows_icon_image_preview").removeClass("windows_icon_image_preview_dark"),quickfavicon_identify_canvases("none"))}),jQuery(".windows_tile_label").on("click",function(){jQuery("#quickfavicon_windows_tile_color_radio_standard").is(":checked")&&(jQuery("#quickfavicon_windows_tile_color").val(jQuery(this).attr("data-tile-color")),jQuery(".windows_icon_cell").css("background",jQuery(this).attr("data-tile-color")),jQuery(this).children("span").removeClass("hidden"),jQuery(".tile-colors").find(".windows_tile_label").not(this).children("span").addClass("hidden"))}),jQuery(document).ready(function(){"white"!=quick_favicon.quickfavicon_windows_icon_style?(jQuery(".windows_sizes").find(".windows_icon_image_preview").removeClass("windows_icon_image_preview_dark"),jQuery("#quickfavicon_windows_icon_style").closest(".options-section").find(".windows_icon_image_preview").children("img").removeClass("icon-white-outline"),quickfavicon_identify_canvases("none")):quickfavicon_identify_canvases("white"),""!=quick_favicon.quickfavicon_windows_tile_color&&jQuery(".windows_icon_cell").css("background",quick_favicon.quickfavicon_windows_tile_color)});
